

    ansible.cfg
	
[defaults]
inventory=/home/ubuntu/inventory
host_key_checking=False
remote_user=ec2-user
ask_pass=False

[privilege_escalation]
become=true
become_ask_pass=False


- Install Ansible on Ec2 --- Ubuntu
     - ansible --version 
	 - apt search boto
     - sudo apt install python3-boto python3-boto3 python3-botocore -y
     

     

  go to aws concole  ----- create IAM role <ansible-admin>--- and attach it to the Ansible instance  ---- 	

 mkdir playbook   
  
  
  ansibleplaybook$ cat inventory 
web01 ansible_host=172.31.38.250

web02 ansible_host=172.31.44.233

db01 ansible_host=172.31.44.132

[web_servers]
web01
web02


[db_servers]
db01


[domain:children]
web_servers
db01


[web_servers:vars]
ansible_user=ec2-user
ansible_ssh_private_key_file=ansible-key.pem


[db_servers:vars]
ansible_user=ubuntu
ansible_ssh_private_key_file=ansible-key.pem



     Using Ad-Hoc commands

$ ansible -i inventory -m ping web01  --------------- 

$ ansible -i inventory -m yum  -a  "name=httpd state=present" web01 --become  ------------- Install httpd on web01

$ ansible -i inventory -m yum  -a  "name=httpd state=present" web01 --become   ----------- Remove httpd on web01

$ ansible -i inventory -m service  -a  "name=httpd  state=started  enableyes" web01  --become   --------- Start httpd service

-- create file index.html   

$ ansible -i inventory -m copy  -a  "src=index.htm  dest=/var/www/html/index.html" web01   --become  ------- copy the file   
 
 





